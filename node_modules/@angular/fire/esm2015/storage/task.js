import { fromTask } from './observable/fromTask';
import { map } from 'rxjs/operators';
/**
 * Create an AngularFireUploadTask from a regular UploadTask from the Storage SDK.
 * This method creates an observable of the upload and returns on object that provides
 * multiple methods for controlling and monitoring the file upload.
 */
export function createUploadTask(task) {
    const inner$ = fromTask(task);
    return {
        task,
        then: task.then.bind(task),
        catch: task.catch.bind(task),
        pause: task.pause.bind(task),
        cancel: task.cancel.bind(task),
        resume: task.resume.bind(task),
        snapshotChanges: () => inner$,
        percentageChanges: () => inner$.pipe(map(s => s.bytesTransferred / s.totalBytes * 100))
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFzay5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9zdG9yYWdlL3Rhc2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBRWpELE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQWdCckM7Ozs7R0FJRztBQUNILE1BQU0sVUFBVSxnQkFBZ0IsQ0FBQyxJQUFnQjtJQUMvQyxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDOUIsT0FBTztRQUNMLElBQUk7UUFDSixJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQzFCLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDNUIsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztRQUM1QixNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQzlCLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDOUIsZUFBZSxFQUFFLEdBQUcsRUFBRSxDQUFDLE1BQU07UUFDN0IsaUJBQWlCLEVBQUUsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLElBQUksQ0FDbEMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixHQUFHLENBQUMsQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFDLENBQ2xEO0tBQ0YsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVcGxvYWRUYXNrLCBVcGxvYWRUYXNrU25hcHNob3QgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgZnJvbVRhc2sgfSBmcm9tICcuL29ic2VydmFibGUvZnJvbVRhc2snO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFuZ3VsYXJGaXJlVXBsb2FkVGFzayB7XG4gIHRhc2s6IFVwbG9hZFRhc2s7XG4gIHNuYXBzaG90Q2hhbmdlcygpOiBPYnNlcnZhYmxlPFVwbG9hZFRhc2tTbmFwc2hvdCB8IHVuZGVmaW5lZD47XG4gIHBlcmNlbnRhZ2VDaGFuZ2VzKCk6IE9ic2VydmFibGU8bnVtYmVyIHwgdW5kZWZpbmVkPjtcbiAgcGF1c2UoKTogYm9vbGVhbjtcbiAgY2FuY2VsKCk6IGJvb2xlYW47XG4gIHJlc3VtZSgpOiBib29sZWFuO1xuICB0aGVuKFxuICAgIG9uRnVsZmlsbGVkPzogKChhOiBVcGxvYWRUYXNrU25hcHNob3QpID0+IGFueSkgfCBudWxsLFxuICAgIG9uUmVqZWN0ZWQ/OiAoKGE6IEVycm9yKSA9PiBhbnkpIHwgbnVsbFxuICApOiBQcm9taXNlPGFueT47XG4gIGNhdGNoKG9uUmVqZWN0ZWQ6IChhOiBFcnJvcikgPT4gYW55KTogUHJvbWlzZTxhbnk+O1xufVxuXG4vKipcbiAqIENyZWF0ZSBhbiBBbmd1bGFyRmlyZVVwbG9hZFRhc2sgZnJvbSBhIHJlZ3VsYXIgVXBsb2FkVGFzayBmcm9tIHRoZSBTdG9yYWdlIFNESy5cbiAqIFRoaXMgbWV0aG9kIGNyZWF0ZXMgYW4gb2JzZXJ2YWJsZSBvZiB0aGUgdXBsb2FkIGFuZCByZXR1cm5zIG9uIG9iamVjdCB0aGF0IHByb3ZpZGVzXG4gKiBtdWx0aXBsZSBtZXRob2RzIGZvciBjb250cm9sbGluZyBhbmQgbW9uaXRvcmluZyB0aGUgZmlsZSB1cGxvYWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVVcGxvYWRUYXNrKHRhc2s6IFVwbG9hZFRhc2spOiBBbmd1bGFyRmlyZVVwbG9hZFRhc2sge1xuICBjb25zdCBpbm5lciQgPSBmcm9tVGFzayh0YXNrKTtcbiAgcmV0dXJuIHtcbiAgICB0YXNrLFxuICAgIHRoZW46IHRhc2sudGhlbi5iaW5kKHRhc2spLFxuICAgIGNhdGNoOiB0YXNrLmNhdGNoLmJpbmQodGFzayksXG4gICAgcGF1c2U6IHRhc2sucGF1c2UuYmluZCh0YXNrKSxcbiAgICBjYW5jZWw6IHRhc2suY2FuY2VsLmJpbmQodGFzayksXG4gICAgcmVzdW1lOiB0YXNrLnJlc3VtZS5iaW5kKHRhc2spLFxuICAgIHNuYXBzaG90Q2hhbmdlczogKCkgPT4gaW5uZXIkLFxuICAgIHBlcmNlbnRhZ2VDaGFuZ2VzOiAoKSA9PiBpbm5lciQucGlwZShcbiAgICAgIG1hcChzID0+IHMuYnl0ZXNUcmFuc2ZlcnJlZCAvIHMudG90YWxCeXRlcyAqIDEwMClcbiAgICApXG4gIH07XG59XG4iXX0=